(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{47:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(5155),l=a(2115);let n=[{id:1,path:"https://res.cloudinary.com/dfjqqnv3x/image/upload/v1750919161/bg1.png"},{id:2,path:"https://res.cloudinary.com/dfjqqnv3x/image/upload/v1750892712/bg2.jpg"}],o=new Set;function s(){o.size>=n.length-1&&o.clear();let e=n.filter(e=>!o.has(e.id)),t=Math.floor(Math.random()*e.length),a=e[t];return o.add(a.id),a}var i=a(6766);function d(e){let{label:t,onImageSelect:a,previewUrl:n}=e,o=(0,l.useRef)(null),[s,d]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("label",{className:"block text-lg text-blue-100 font-mono tracking-wider drop-shadow-[0_0_3px_rgba(147,197,253,0.5)] mb-2",children:t}),(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-all duration-300\n          ".concat(s?"border-blue-400 bg-blue-400/10":"border-blue-400/30 hover:border-blue-300","\n          ").concat(n?"bg-[#000c14]/50":"bg-[#000c14]/30"),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),d(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),d(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),d(!1);let t=e.dataTransfer.files;if(t&&t.length>0){let e=t[0];e.type.startsWith("image/")&&a(e)}},onClick:()=>{var e;return null==(e=o.current)?void 0:e.click()},children:[n?(0,r.jsx)("div",{className:"relative w-full aspect-square",children:(0,r.jsx)(i.default,{src:n,alt:"Preview",fill:!0,className:"object-contain rounded-lg",sizes:"(max-width: 768px) 100vw, 50vw"})}):(0,r.jsx)("div",{className:"py-8",children:(0,r.jsx)("p",{className:"text-blue-300 font-mono tracking-wide",children:"Drag and drop an image here, or click to select"})}),(0,r.jsx)("input",{ref:o,type:"file",className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files;t&&t.length>0&&a(t[0])}})]})]})}function c(e){let{src:t,alt:a,isGlitching:n=!1}=e,[o,s]=(0,l.useState)({x:0,y:0}),[d,c]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{if(!n)return;let e=setInterval(()=>{s({x:10*Math.random()-5,y:10*Math.random()-5})},50);return()=>clearInterval(e)},[n]),n)?(0,r.jsxs)("div",{className:"relative aspect-square glitch-container bg-[#001020]",children:[d&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-400"})}),(0,r.jsx)("div",{className:"glitch-image",children:(0,r.jsx)(i.default,{src:t,alt:a,fill:!0,className:"object-contain rounded-lg",sizes:"(max-width: 768px) 100vw, 50vw",priority:!0,onLoadingComplete:()=>c(!1),style:{transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)")}})}),(0,r.jsx)("div",{className:"glitch-image glitch-r",style:{transform:"translate(".concat(-1.5*o.x,"px, 0)")},children:(0,r.jsx)(i.default,{src:t,alt:a,fill:!0,className:"object-contain rounded-lg",sizes:"(max-width: 768px) 100vw, 50vw",priority:!0})}),(0,r.jsx)("div",{className:"glitch-image glitch-g",style:{transform:"translate(".concat(1.5*o.x,"px, 0)")},children:(0,r.jsx)(i.default,{src:t,alt:a,fill:!0,className:"object-contain rounded-lg",sizes:"(max-width: 768px) 100vw, 50vw",priority:!0})})]}):(0,r.jsxs)("div",{className:"relative aspect-square bg-[#001020]",children:[d&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-400"})}),(0,r.jsx)(i.default,{src:t,alt:a,fill:!0,className:"object-contain rounded-lg transition-opacity duration-300 ".concat(d?"opacity-0":"opacity-100"),sizes:"(max-width: 768px) 100vw, 50vw",priority:!0,onLoadingComplete:()=>c(!1)})]})}function u(e){let{className:t=""}=e;return(0,r.jsxs)("button",{onClick:()=>{let e=encodeURIComponent("Just got my Finance PFP! \uD83D\uDD25\n\nFSQ4CBemMh7SBAC6odzCaRCvQZPc5i4QTLTFTSAdpump");window.open("https://twitter.com/intent/tweet?text=".concat(e),"_blank","noopener,noreferrer")},className:"flex items-center gap-2 text-blue-300 hover:text-blue-100 transition-all duration-300 font-mono tracking-wider text-sm ".concat(t),children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",className:"relative top-[-1px]",children:(0,r.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Share"]})}function b(){let[e,t]=(0,l.useState)(null),[a,n]=(0,l.useState)(null),[o,i]=(0,l.useState)(null),[b,m]=(0,l.useState)(null),[h,x]=(0,l.useState)(!1),[p,g]=(0,l.useState)(null),f=(0,l.useCallback)(()=>{let e=s();console.log("New background selected:",e),t(e)},[]),w=async()=>{if(!a)return void g("Please upload a profile picture");f(),await new Promise(e=>setTimeout(e,100)),g(null),x(!0);let t=new AbortController,r=setTimeout(()=>t.abort(),6e4);try{console.log("Submitting with:",{background:e,profileImage:{name:a.name,type:a.type,size:a.size}});let l=await new Promise(e=>{let t=new FileReader;t.onloadend=()=>e(t.result),t.readAsDataURL(a)}),n=s(),o=await fetch("/api/generate-pfp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backgroundPath:n.path,profile:l}),signal:t.signal});if(clearTimeout(r),!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.details||e.error||"Failed to generate image")}let i=await o.json();m(i.imageUrl)}catch(e){if(e instanceof Error){if("AbortError"===e.name)return void g("Generation is taking longer than expected. Please wait...");g("Error: ".concat(e.message))}else g("Failed to generate image. Please try again.");console.error(e)}finally{x(!1)}},v=async()=>{if(!b)return;let e=await fetch(b),t=await e.blob(),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="my_finance_pfp.png",document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)};return(0,r.jsx)("div",{className:"text-white",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl text-blue-100 font-mono tracking-widest drop-shadow-[0_0_3px_rgba(147,197,253,0.5)] mb-6 font-bold uppercase",children:"FIX MY FINANCE"}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-[#001830] to-[#000c24] border border-blue-400/30 rounded-lg p-6 hover:border-blue-300/50 transition-all duration-500 shadow-lg shadow-blue-500/20 ".concat(h?"glitch-container":""),children:(0,r.jsxs)("div",{className:"max-w-sm mx-auto",children:[(0,r.jsx)("div",{className:"bg-[#001020] rounded-lg overflow-hidden border border-blue-400/20 p-3 shadow-inner shadow-blue-500/10",children:a||b?(0,r.jsx)(c,{src:b||o,alt:b?"Generated PFP":"Profile Preview",isGlitching:h}):(0,r.jsx)(d,{label:"Upload Profile Picture",onImageSelect:e=>{let t=new FileReader;t.onloadend=()=>{"string"==typeof t.result&&(n(e),i(t.result))},t.readAsDataURL(e)},previewUrl:null})}),p&&(0,r.jsx)("div",{className:"mt-3 p-2 bg-red-500/10 border border-red-400/30 rounded text-red-300 font-mono text-sm",children:p}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col gap-3 items-center",children:[a&&!b&&(0,r.jsx)("button",{onClick:w,disabled:h,className:"w-full px-4 py-2 rounded font-mono tracking-wider transition-all text-sm\n                    ".concat(h?"bg-[#001428]/50 border border-blue-400/30 text-blue-300/50 cursor-not-allowed":"bg-[#001428] border border-blue-400/50 text-blue-300 hover:border-blue-300 hover:text-blue-100 shadow-sm shadow-blue-500/20 button-glow","\n                  "),children:h?"Generating...":"Generate PFP"}),b&&(0,r.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,r.jsx)("button",{onClick:w,disabled:h,className:"flex-1 px-4 py-2 rounded font-mono tracking-wider transition-all text-sm\n                      ".concat(h?"bg-[#001428]/50 border border-blue-400/30 text-blue-300/50 cursor-not-allowed":"bg-[#001428] border border-blue-400/50 text-blue-300 hover:border-blue-300 hover:text-blue-100 shadow-sm shadow-blue-500/20 button-glow","\n                    "),children:h?"Generating...":"New Style"}),(0,r.jsx)("button",{onClick:v,disabled:h,className:"flex-1 px-4 py-2 rounded font-mono tracking-wider transition-all text-sm bg-[#001428] border border-blue-400/50 text-blue-300 hover:border-blue-300 hover:text-blue-100 shadow-sm shadow-blue-500/20 button-glow",children:"Download"}),(0,r.jsx)(u,{className:"flex-1 px-4 py-2 rounded font-mono tracking-wider transition-all text-sm bg-[#001428] border border-blue-400/50 hover:border-blue-300 shadow-sm shadow-blue-500/20 button-glow"})]}),(a||b)&&(0,r.jsx)("button",{onClick:()=>{n(null),i(null),m(null),g(null)},className:"text-blue-400/70 hover:text-blue-300 font-mono text-xs underline underline-offset-4",children:"Upload Different Picture"})]})]})})]})})}a(4182)},4182:()=>{}}]);